---
import type { GetStaticPaths } from "astro";
import PokemonCard from "@components/pokemons/PokemonCard.astro";
import type { PokemonListResponse } from "@interfaces/pokemon-list.response";
import MainLayout from "@layouts/MainLayout.astro";



export const getStaticPaths = (async ({ paginate }) => {
    const resp = await fetch('https://pokeapi.co/api/v2/pokemon?limit=151')
    const { results } = (await resp.json()) as PokemonListResponse;
    return paginate(results,{ pageSize: 20 })
}) satisfies GetStaticPaths;


const title = "Astro Course | Home"
const { page } = Astro.props;

---

<MainLayout title={title} >
  <h1 class="text-7xl mb-10">Listado de Pokémons</h1>
  <section class="grid grid-cols-4 gap-2">
    {
      page.data.map((pokemon) => (
        <PokemonCard pokemon={pokemon} />

      ))
    }
  </section>
  <section class="flex  mt-10 gap-2 items-center">
    <a 
      class:list={[
        'btn',{
          disabled: !page.url.prev
        }
      ]}
      href={page.url.prev}
    > Anterior</a>
    <a       
      class:list={[
        'btn',{
          disabled: !page.url.next  
        }
      ]}
      href={page.url.next}
    > Siguiente</a>
    <div class="flex flex-1"></div>
    <span class="text-xl font-bold">Página {page.currentPage}</span>
    
    
  </section>
	
</MainLayout>
<style>
  .btn {
    @apply bg-blue-500 text-white px-4 p-2 rounded-md;
  }
  .disabled {
    @apply bg-gray-300 text-gray-500 cursor-not-allowed;
  }
</style>